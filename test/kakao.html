<!doctype HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta property="og:url" content="https://developers.kakao.com/">
    <meta property="og:content" content="Kakao Developers_">
    <meta property="og:type" content="website">

    <title>API Demo: Post link to KakaoStory  - Kakao Javascript SDK</title>
    <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
</head>
<body>
<a id="kakao-login-btn"></a>

<div>
    <p id="post-result">공유하기</p>
</div>

<script>
    // 사용할 앱의 Javascript 키를 설정해 주세요.
    Kakao.init('207aa395bc0cb51730547fd97ee9d369');
    Kakao.Auth.createLoginButton({
        container: '#kakao-login-btn',
        success: function() {

            // 로그인 성공시, API를 호출합니다.
            Kakao.API.request( {
                url : '/v1/api/story/linkinfo',
                data : {
                    url : 'http://www.ange.co.kr'
                }
            }).then(function(res) {
                res.title = '제목';
                res.description = '본문 내용';
                res.site_name = 'www.ange.co.kr';
                // 이전 API 호출이 성공한 경우 다음 API를 호출합니다.
                return Kakao.API.request( {
                    url : '/v1/api/story/post/link',
                    data : {
                        link_info : res
                    }
                });
            }).then(function(res) {
                return Kakao.API.request( {
                    url : '/v1/api/story/mystory',
                    data : { id : res.id }
                });
            }).then(function(res) {
                document.getElementById('post-result').innerHTML = JSON.stringify(res);
            }, function (err) {
                alert(JSON.stringify(err));
            });

        },
        fail: function(err) {
            alert(JSON.stringify(err))
        }
    });
</script>
</body>
</html>