define(["controller/controllers"],function(controllers){controllers.controller("webboard_view",["$scope","$rootScope","$stateParams","$location","dialogs","UPLOAD",function($scope,$rootScope,$stateParams,$location,dialogs,UPLOAD){$scope.queue=[];$scope.item={};$scope.init=function(session){};$scope.click_showCmsBoardEdit=function(item){if($rootScope.role!="CMS_ADMIN"&&$rootScope.role!="MANAGER"&&$rootScope.uid!=item.REG_UID){dialogs.notify("\uc54c\ub9bc","\uc218\uc815 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.",{size:"md"});return}$location.url("/webboard/edit/"+item.NO)};$scope.click_showCmsBoardList=function(){$location.url("/webboard/list")};$scope.getCmsBoard=function(){if($stateParams.id!=0)return $scope.getItem("com/webboard","item",$stateParams.id,{},false).then(function(data){$scope.item=data;var files=data.FILES;for(var i in files)$scope.queue.push({"name":files[i].FILE_NM,"size":files[i].FILE_SIZE,"url":UPLOAD.BASE_URL+files[i].PATH+files[i].FILE_ID,"thumbnailUrl":UPLOAD.BASE_URL+files[i].PATH+"thumbnail/"+files[i].FILE_ID,"mediumUrl":UPLOAD.BASE_URL+files[i].PATH+"medium/"+files[i].FILE_ID,"deleteUrl":"http://localhost/serverscript/upload/?file="+files[i].FILE_NM,"deleteType":"DELETE"})})["catch"](function(error){dialogs.error("\uc624\ub958",error+"",{size:"md"})})};$scope.getSession().then($scope.sessionCheck).then($scope.init).then($scope.getCmsBoard)["catch"]($scope.reportProblems)}])});