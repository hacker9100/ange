define(["controller/controllers"],function(g){g.controller("content-view",["$scope","$sce","$rootScope","$stateParams","$location","$q","dialogs","UPLOAD",function(a,g,f,e,k,m,l,h){a.queue=[];a.item={};a.init=function(a){};a.click_showContentEdit=function(a){"CMS_ADMIN"!=f.role&&"MANAGER"!=f.role&&"MAGAZINE"!=f.role&&f.uid!=a.EDITOR_ID?l.notify("\uc54c\ub9bc","\uc218\uc815 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.",{size:"md"}):k.url("/"+e.menu+"/edit/"+e.id)};a.click_showContentList=function(){k.path("/"+
    e.menu+"/list")};a.click_showGetHistory=function(c){a.openHistoryModal({TASK_NO:c},"lg")};a.openHistoryModal=function(c,b){l.create("/partials/cms/popup/history.html",function(a,b,e){a.getList("cms/history","list",{},c,!0).then(function(b){a.list=b})["catch"](function(a){console.log(a)});a.list=e;a.click_ok=function(){b.close()}},c,{size:b,keyboard:!0},a).result.then(function(){},function(){})};a.getTask=function(){var c=m.defer();a.getItem("cms/task","item",e.id,{},!1).then(function(b){a.task=b;
    c.resolve()})["catch"](function(a){console.log(a);c.reject(a)});return c.promise};a.getContent=function(){var c={};-1<e.menu.indexOf("article")&&20<=a.task.PHASE&&(c={CURRENT_FL:"N"});a.getItem("cms/content","item",e.id,c,!1).then(function(b){a.item=b;var c=b.BODY.replace(/border:1px dashed;/g,"");a.item.BODY=g.trustAsHtml(c);b=b.FILES;for(var d in b)a.queue.push({name:b[d].FILE_NM,size:b[d].FILE_SIZE,url:h.BASE_URL+b[d].PATH+b[d].FILE_ID,thumbnailUrl:h.BASE_URL+b[d].PATH+"thumbnail/"+b[d].FILE_ID,
    mediumUrl:h.BASE_URL+b[d].PATH+"medium/"+b[d].FILE_ID,deleteUrl:"http://localhost/serverscript/upload/?file="+b[d].FILE_NM,deleteType:"DELETE"})})["catch"](function(a){console.log(a)})};a.getSession().then(a.sessionCheck).then(a.init).then(a.getTask).then(a.getContent)["catch"](a.reportProblems)}])});