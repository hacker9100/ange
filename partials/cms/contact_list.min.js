define(["controller/controllers"],function(controllers){controllers.controller("contact_list",["$scope","$stateParams","$location","$filter","ngTableParams",function($scope,$stateParams,$location,$filter,ngTableParams){$scope.key="";$scope.item={};$scope.init=function(){$scope.getList("com/permission","list",{},{ROLE:true},false).then(function(data){$scope.roles=data;$scope.user_roles=data;$scope.item.ROLE=data[0]})["catch"](function(error){alert(error)})};$scope.click_deleteCmsUser=function(idx){var user=$scope.tableParams.data[idx];$scope.deleteItem("com/user","item",user.USER_ID,true).then(function(){alert("\uc815\uc0c1\uc801\uc73c\ub85c \uc0ad\uc81c\ud588\uc2b5\ub2c8\ub2e4.");$scope.tableParams.data.splice(idx,1)})["catch"](function(error){alert(error)})};$scope.click_searchCmsUser=function(){$scope.tableParams.reload()};$scope.getCmsUserList=function(){$scope.tableParams=new ngTableParams({page:1,count:1E3,sorting:{USER_NM:"asc"}},{groupBy:"ROLE_NM",counts:[],total:0,getData:function($defer,params){$scope.getList("com/user","list",{},$scope.search,true).then(function(data){params.total(data[0].TOTAL_COUNT);$defer.resolve(data)})["catch"](function(error){alert(error)})}})};$scope.click_saveCmsUser=function(){if($scope.key=="")$scope.insertItem("com/user","item",$scope.item,false).then(function(){$scope.tableParams.reload()})["catch"](function(error){alert(error)});else $scope.updateItem("com/user","item",$scope.key,$scope.item,false).then(function(){$scope.tableParams.reload()})["catch"](function(error){alert(error)});$scope.click_cancel()};$scope.click_getCmsUser=function(id){$scope.key=id;if($scope.key!="")$scope.getItem("com/user","item",$scope.key,{},false).then(function(data){$("html,body").animate({scrollTop:$("#item").offset().top},100);$scope.item=data})["catch"](function(error){alert(error)})};$scope.click_cancel=function(){$scope.key="";$scope.item={};$scope.item.ROLE=$scope.user_roles[0]};$scope.getSession().then($scope.sessionCheck).then($scope.permissionCheck).then($scope.init).then($scope.getCmsUserList)["catch"]($scope.reportProblems)}]);controllers.controller("contact_list_modal",["$scope","$stateParams","$modalInstance","$location","$filter","ngTableParams","data",function($scope,$stateParams,$modalInstance,$location,$filter,ngTableParams,data){$scope.key="";$scope.item={};$scope.init=function(){$scope.getList("com/permission","list",{},{ROLE:true},false).then(function(data){$scope.roles=data;$scope.user_roles=data;$scope.item.ROLE=data[0]})["catch"](function(error){alert(error)});if(data!=undefined){$scope.isModal=true;$scope.search=data}};$scope.click_deleteCmsUser=function(idx){var user=$scope.tableParams.data[idx];$scope.deleteItem("com/user","item",user.USER_ID,true).then(function(){alert("\uc815\uc0c1\uc801\uc73c\ub85c \uc0ad\uc81c\ud588\uc2b5\ub2c8\ub2e4.");$scope.tableParams.data.splice(idx,1)})["catch"](function(error){alert(error)})};$scope.click_searchCmsUser=function(){$scope.tableParams.reload()};$scope.getCmsUserList=function(){$scope.tableParams=new ngTableParams({page:1,count:1E3,sorting:{USER_NM:"asc"}},{groupBy:"ROLE_NM",counts:[],total:0,getData:function($defer,params){$scope.getList("com/user","list",{},$scope.search,true).then(function(data){params.total(data[0].TOTAL_COUNT);$defer.resolve(data)})["catch"](function(error){alert(error)})}})};$scope.click_saveCmsUser=function(){if($scope.key=="")$scope.insertItem("com/user","item",$scope.item,false).then(function(){$scope.tableParams.reload()})["catch"](function(error){alert(error)});else $scope.updateItem("com/user","item",$scope.key,$scope.item,false).then(function(){$scope.tableParams.reload()})["catch"](function(error){alert(error)});$scope.click_cancel()};$scope.click_getCmsUser=function(id){$scope.key=id;if($scope.key!="")$scope.getItem("com/user","item",$scope.key,{},false).then(function(data){$scope.item=data})["catch"](function(error){alert(error)})};$scope.click_selectCmsUser=function(item){$modalInstance.close(item)};$scope.click_cancel=function(){$scope.key="";$scope.item={};$scope.item.ROLE=$scope.user_roles[0]};$scope.click_ok=function(){$modalInstance.close()};$scope.getSession().then($scope.sessionCheck).then($scope.permissionCheck).then($scope.init).then($scope.getCmsUserList)["catch"]($scope.reportProblems)}])});