define(["controller/controllers"],function(h){h.controller("webboard-edit",["$scope","$stateParams","$location","dialogs","UPLOAD",function(a,d,f,g,e){a.options={url:e.UPLOAD_INDEX,autoUpload:!0,dropZone:angular.element("#dropzone")};a.addEditor=!0;a.queue=[];a.item={};a.init=function(a){};a.$on("ckeditor.ready",function(b){a.isReady=!0});a.ckeditor="<p>Hello</p>";a.click_showCmsBoardList=function(){f.url("/webboard/list")};a.getCmsBoard=function(){0!=d.id&&a.getItem("com/webboard","item",d.id,{},
    !1).then(function(b){a.item=b;"Y"==a.item.NOTICE_FL?a.item.NOTICE_FL=!0:a.item.NOTICE_FL=!1;b=b.FILES;for(var c in b)a.queue.push({name:b[c].FILE_NM,size:b[c].FILE_SIZE,url:e.BASE_URL+b[c].PATH+b[c].FILE_ID,thumbnailUrl:e.BASE_URL+b[c].PATH+"thumbnail/"+b[c].FILE_ID,mediumUrl:e.BASE_URL+b[c].PATH+"medium/"+b[c].FILE_ID,deleteUrl:"http://localhost/serverscript/upload/?file="+b[c].FILE_NM,deleteType:"DELETE"})})["catch"](function(a){g.error("\uc624\ub958",a+"",{size:"md"})})};a.click_saveCmsBoard=function(){a.item.SYSTEM_GB=
    "CMS";a.item.FILES=a.queue;for(var b in a.item.FILES)a.item.FILES[b].$destroy="",a.item.FILES[b].$editor="";0==d.id?a.insertItem("com/webboard","item",a.item,!1).then(function(){f.url("/webboard/list")})["catch"](function(a){g.error("\uc624\ub958",a+"",{size:"md"})}):a.updateItem("com/webboard","item",d.id,a.item,!1).then(function(){f.url("/webboard/list")})["catch"](function(a){g.error("\uc624\ub958",a+"",{size:"md"})})};a.getSession().then(a.sessionCheck).then(a.init).then(a.getCmsBoard)["catch"](a.reportProblems)}])});