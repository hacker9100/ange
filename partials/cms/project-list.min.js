define(["controller/controllers"],function(f){f.controller("project-list",["$scope","$rootScope","$stateParams","$location","dialogs","ngTableParams","COMMON",function(a,b,f,e,d,h,k){a.search={};var g=[],l=(new Date).getFullYear();a.init=function(){for(var c=2010;c<l+5;c++)g.push(c+"");c=[{name:"\ub4f1\ub85d\uc790",value:"REG_NM"},{name:"\uc81c\ubaa9+\ub0b4\uc6a9",value:"SUBJECT"}];a.years=g;a.conditions=c;a.search.CONDITION=c[0]};a.click_createNewProject=function(){e.path("/project/edit/0")};a.click_showViewProject=
    function(a){e.url("/project/view/"+a)};a.click_showEditProject=function(a){"CMS_ADMIN"!=b.role&&"MANAGER"!=b.role&&b.uid!=a.REG_UID?d.notify("\uc54c\ub9bc","\uc218\uc815 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.",{size:"md"}):e.path("/project/edit/"+a.NO)};a.click_deleteProject=function(c){"3"==c.PROJECT_ST?d.notify("\uc54c\ub9bc","\uc644\ub8cc \uc0c1\ud0dc\uc758 \ud504\ub85c\uc81d\ud2b8\ub294 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",{size:"md"}):"ADMIN"!=b.role&&"MANAGER"!=b.role&&
    b.uid!=c.REG_UID?d.notify("\uc54c\ub9bc","\uc0ad\uc81c \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.",{size:"md"}):d.confirm("\uc54c\ub9bc","\uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c.",{size:"md"}).result.then(function(b){a.deleteItem("cms/project","item",c.NO,!1).then(function(){d.notify("\uc54c\ub9bc","\uc815\uc0c1\uc801\uc73c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",{size:"md"});a.tableParams.reload()})["catch"](function(a){d.error("\uc624\ub958",a+"",{size:"md"})})},function(a){})};
    a.click_searchProject=function(){a.tableParams.reload()};a.PAGE_SIZE=k.PAGE_SIZE;a.getProjectList=function(){a.tableParams=new h({page:1,count:a.PAGE_SIZE,sorting:{REG_DT:"desc"}},{counts:[],total:0,getData:function(c,b){var d=Object.keys(b.sorting())[0];a.search.SORT=d;a.search.ORDER=b.sorting()[d];a.getList("cms/project","list",{NO:b.page()-1,SIZE:a.PAGE_SIZE},a.search,!0).then(function(d){var e=d[0].TOTAL_COUNT;a.TOTAL_COUNT=e;b.total(e);c.resolve(d)})["catch"](function(b){a.TOTAL_COUNT=0;c.resolve([])})}})};
    a.$watch("selectItems * selectCount < itemsPerPage * currentPage",function(){a.selectCount+=1});a.getSession().then(a.sessionCheck).then(a.permissionCheck)["catch"](a.reportProblems);a.init();a.getProjectList()}])});