define(["controller/controllers"],function(d){d.controller("category-main",["$scope","$stateParams","$location","dialogs","ngTableParams",function(a,d,g,b,f){a.key="";a.item={};a.search={};a.init=function(){a.getList("cms/category","list",{},{CATEGORY_GB:"2",PARENT_NO:"0"},!1).then(function(c){a.parents=c})["catch"](function(a){console.log(a)})};a.click_deleteCategory=function(c){b.confirm("\uc54c\ub9bc","\uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c.",{size:"md"}).result.then(function(e){a.deleteItem("cms/category",
    "item",c.NO,!0).then(function(){b.notify("\uc54c\ub9bc","\uc815\uc0c1\uc801\uc73c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",{size:"md"});a.tableParams.reload()})["catch"](function(a){b.error("\uc624\ub958",a+"",{size:"md"})})},function(a){})};a.searchCategory=function(){a.tableParams.reload()};a.getCategoryList=function(){a.tableParams=new f({page:1,count:1E3,sorting:{NO:"asc"}},{counts:[],total:0,getData:function(c,e){var b=Object.keys(e.sorting())[0];a.search.SORT=b;a.search.ORDER=e.sorting()[b];
    a.getList("cms/category","list",{},a.search,!0).then(function(b){var d=b[0].TOTAL_COUNT;a.TOTAL_COUNT=d;e.total(d);c.resolve(b)})["catch"](function(a){c.resolve([])})}})};a.click_saveCategory=function(){""==a.key?a.insertItem("cms/category","item",a.item,!1).then(function(){b.notify("\uc54c\ub9bc","\uc815\uc0c1\uc801\uc73c\ub85c \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",{size:"md"});a.tableParams.reload()})["catch"](function(a){b.error("\uc624\ub958",a+"",{size:"md"})}):a.updateItem("cms/category",
    "item",a.key,a.item,!1).then(function(){b.notify("\uc54c\ub9bc","\uc815\uc0c1\uc801\uc73c\ub85c \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",{size:"md"});a.tableParams.reload()})["catch"](function(a){b.error("\uc624\ub958",a+"",{size:"md"})});a.click_cancel()};a.click_getCategory=function(c){a.key=c;""!=a.key&&a.getItem("cms/category","item",a.key,{},!1).then(function(b){for(var c=0,d=0;d<a.parents.length;d++)b.PARENT_NO==a.parents[d].NO&&(c=d);a.item=b;a.item.PARENT="0"==b.PARENT_NO?null:a.parents[c];
    a.click_focus()})["catch"](function(a){b.error("\uc624\ub958",a+"",{size:"md"})})};a.click_focus=function(){$("html,body").animate({scrollTop:$("#item").offset().top},100);$("#item_gb").focus()};a.click_updateStatus=function(c){c.CATEGORY_ST="1"==c.CATEGORY_ST?"0":"1";a.updateItem("cms/category","item",c.NO,c,!1).then(function(){b.notify("\uc54c\ub9bc","\uce74\ud14c\uace0\ub9ac \uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",{size:"md"})})["catch"](function(c){b.error("\uc624\ub958",
    c+"",{size:"md"});a.tableParams.reload()})};a.click_cancel=function(){a.key="";a.item={}};a.getSession().then(a.sessionCheck).then(a.permissionCheck).then(a.init).then(a.getCategoryList)["catch"](a.reportProblems)}])});