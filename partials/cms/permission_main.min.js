define(["controller/controllers"],function(controllers){controllers.controller("permission_main",["$scope","$stateParams","$location","dialogs",function($scope,$stateParams,$location,dialogs){$scope.init=function(){$scope.getList("com/permission","list",{},{SYSTEM_GB:"CMS"},false).then(function(data){$scope.roles=data;$scope.ROLE=data[0]})["catch"](function(error){console.log(error)})};$scope.$watch("ROLE",function(data){if(typeof data!=="undefined")$scope.getPermission()});$scope.getPermission=function(){$scope.getItem("com/permission","item",$scope.ROLE.ROLE_ID,{},false).then(function(data){$scope.list=data})["catch"](function(error){dialogs.error("\uc624\ub958",error+"",{size:"md"})})};$scope.click_savePermission=function(){$scope.updateItem("com/permission","item",$scope.ROLE.ROLE_ID,$scope.list,false).then(function(){dialogs.notify("\uc54c\ub9bc","\uad8c\ud55c\uc774 \uc218\uc815 \ub418\uc5c8\uc2b5\ub2c8\ub2e4.",{size:"md"})})["catch"](function(error){dialogs.error("\uc624\ub958",error+"",{size:"md"})})};$scope.getSession().then($scope.sessionCheck).then($scope.permissionCheck).then($scope.init)["catch"]($scope.reportProblems)}])});