define(["controller/controllers"],function(e){e.controller("series-main",["$scope","$stateParams","$location","dialogs","ngTableParams",function(a,e,h,b,f){a.key="";a.item={};a.search={};a.init=function(){};a.click_deleteSeries=function(c,d){var g=a.tableParams.data[c].data[d];b.confirm("\uc54c\ub9bc","\uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c.",{size:"md"}).result.then(function(k){a.deleteItem("cms/series","item",g.NO,!0).then(function(){b.notify("\uc54c\ub9bc","\uc815\uc0c1\uc801\uc73c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",
    {size:"md"});a.tableParams.data[c].data.splice(d,1)})["catch"](function(a){b.error("\uc624\ub958",a+"",{size:"md"})})},function(a){})};a.click_searchSeries=function(){a.tableParams.reload()};a.getSeriesList=function(){a.tableParams=new f({page:1,count:1E3,sorting:{SERIES_NM:"asc"}},{groupBy:"SERIES_GB",counts:[],total:0,getData:function(c,d){var b=Object.keys(d.sorting())[0];a.search.SORT=b;a.search.ORDER=d.sorting()[b];a.getList("cms/series","list",{},a.search,!0).then(function(b){var e=b[0].TOTAL_COUNT;
    a.TOTAL_COUNT=e;d.total(e);c.resolve(b)})["catch"](function(a){c.resolve([])})}})};a.click_saveSeries=function(){""==a.key?a.insertItem("cms/series","item",a.item,!1).then(function(){b.notify("\uc54c\ub9bc","\uc815\uc0c1\uc801\uc73c\ub85c \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",{size:"md"});a.tableParams.reload()})["catch"](function(a){b.error("\uc624\ub958",a+"",{size:"md"})}):a.updateItem("cms/series","item",a.key,a.item,!1).then(function(){b.notify("\uc54c\ub9bc","\uc815\uc0c1\uc801\uc73c\ub85c \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",
    {size:"md"});a.tableParams.reload()})["catch"](function(a){b.error("\uc624\ub958",a+"",{size:"md"})});a.click_cancel()};a.click_getSeries=function(c){a.key=c;""!=a.key&&a.getItem("cms/series","item",a.key,{},!1).then(function(b){a.item=b;a.click_focus()})["catch"](function(a){b.error("\uc624\ub958",a+"",{size:"md"})})};a.click_updateStatus=function(c){c.SERIES_ST="1"==c.SERIES_ST?"0":"1";a.updateItem("cms/series","item",c.NO,c,!1).then(function(){b.notify("\uc54c\ub9bc","\uc2dc\ub9ac\uc988 \uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",
    {size:"md"})})["catch"](function(c){b.error("\uc624\ub958",c+"",{size:"md"});a.tableParams.reload()})};a.click_focus=function(){$("html,body").animate({scrollTop:$("#item").offset().top},100);$("#item_gb").focus()};a.click_cancel=function(){a.key="";a.item={};a.item.SERIES_GB="1"};a.getSession().then(a.sessionCheck).then(a.permissionCheck).then(a.init).then(a.getSeriesList)["catch"](a.reportProblems)}])});