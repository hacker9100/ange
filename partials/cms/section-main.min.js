define(["controller/controllers"],function(f){f.controller("section-main",["$scope","$stateParams","$location","$filter","dialogs","ngTableParams",function(a,f,k,l,c,h){a.key="";a.item={};a.search={};a.init=function(){a.getList("cms/section","list",{},{ROLE:!0},!1).then(function(b){a.season=b})["catch"](function(a){alert(a)})};a.initUpdate=function(){0!=f.id&&a.getTask()};a.click_deleteSection=function(b,g){var e=a.tableParams.data[b].data[g];c.confirm("\uc54c\ub9bc","\uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c.",
    {size:"md"}).result.then(function(d){a.deleteItem("cms/section","item",e.NO,!0).then(function(){c.notify("\uc54c\ub9bc","\uc815\uc0c1\uc801\uc73c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",{size:"md"});a.tableParams.data[b].data.splice(g,1);a.tableParams.reload();a.getList("cms/section","list",{},{ROLE:!0},!1).then(function(b){a.season=b})["catch"](function(a){alert(a)});a.click_cancel()})["catch"](function(a){c.error("\uc624\ub958",a+"",{size:"md"})})},function(a){})};a.click_searchSection=
    function(){a.tableParams.reload()};a.getSectionList=function(b){a.tableParams=new h({page:1,count:1E3,sorting:{SECTION_NM:"asc",SORT_IDX:"asc"}},{groupBy:"SEASON_NM",counts:[],total:0,getData:function(b,e){var d=Object.keys(e.sorting())[0];a.search.SORT=d;a.search.ORDER=e.sorting()[d];a.getList("cms/section","list",{},a.search,!0).then(function(d){var c=d[0].TOTAL_COUNT;a.TOTAL_COUNT=c;e.total(c);b.resolve(d)})["catch"](function(a){b.resolve([])})}})};a.click_saveSection=function(){""==a.key?a.insertItem("cms/section",
    "item",a.item,!1).then(function(){c.notify("\uc54c\ub9bc","\uc815\uc0c1\uc801\uc73c\ub85c \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",{size:"md"});a.tableParams.reload();a.getList("cms/section","list",{},{ROLE:!0},!1).then(function(b){a.season=b})["catch"](function(a){alert(a)})})["catch"](function(a){c.error("\uc624\ub958",a+"",{size:"md"})}):a.updateItem("cms/section","item",a.key,a.item,!1).then(function(){c.notify("\uc54c\ub9bc","\uc815\uc0c1\uc801\uc73c\ub85c \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",
    {size:"md"});a.tableParams.reload()})["catch"](function(a){c.error("\uc624\ub958",a+"",{size:"md"})});a.key="";a.item={}};a.click_getSection=function(b){a.key=b;""!=a.key&&a.getItem("cms/section","item",a.key,{},!1).then(function(b){for(var c=0,d=0;d<a.season.length;d++)JSON.stringify(b.SEASON_NM)==JSON.stringify(a.season[d].SEASON_NM)&&(c=d);a.item=b;a.item.SELECT_SEASON_NM=a.season[c];a.season_nm_check=!0;$("html,body").animate({scrollTop:$("#item").offset().top},100);$("#season_gb").focus()})["catch"](function(a){alert(a)})};
    a.click_focus=function(){$("html,body").animate({scrollTop:$("#item").offset().top},100);$("#season_gb").focus();a.key="";a.item={}};a.$watch("item.SELECT_SEASON_NM",function(b){null!=b&&""!=b?(a.item.SEASON_NM=b.SEASON_NM,a.item.OLD_SEASON_NM=b.SEASON_NM,$("#old_season_nm").val(b.SEASON_NM),$("#season_upt_btn").show()):(a.item.SEASON_NM="",$("#season_upt_btn").hide())});a.click_updateSeason=function(){console.log("$scope.item.SEASON_NM = "+a.item.SEASON_NM);a.updateItem("cms/section","item",{},a.item,
        !1).then(function(){alert("\uc2dc\uc98c\uc218\uc815\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4");a.tableParams.reload();a.getList("cms/section","list",{},{ROLE:!0},!1).then(function(b){a.season=b})["catch"](function(a){alert(a)})})["catch"](function(a){alert(a)})};a.click_cancel=function(){a.key="";a.item={}};a.$parent.message="ANGE CMS";a.$parent.pageTitle="\uc139\uc158 \uad00\ub9ac";a.$parent.pageDescription="CMS \uc139\uc158\uc744 \uad00\ub9ac\ud569\ub2c8\ub2e4.";a.$parent.tailDescription=
        ".";a.getSession().then(a.sessionCheck).then(a.init).then(a.getSectionList)["catch"](a.reportProblems)}])});