define(["controller/controllers"],function(controllers){controllers.controller("task_view",["$scope","$rootScope","$stateParams","dataService","$q","$location","dialogs",function($scope,$rootScope,$stateParams,dataService,$q,$location,dialogs){$scope.item={};$scope.init=function(){};$scope.click_showTaskList=function(){$location.path("/task/list")};$scope.click_showTaskEdit=function(key){if(!($rootScope.role=="CMS_ADMIN"||$rootScope.role=="MANAGER")&&$rootScope.uid!=item.REG_UID){dialogs.notify("\uc54c\ub9bc","\uc218\uc815 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.",{size:"md"});return}$location.url("/task/edit/"+key)};$scope.getTask=function(){$scope.getItem("cms/task","item",$stateParams.id,{},true).then(function(data){$scope.item=data;$scope.CATEGORY=angular.fromJson(data.CATEGORY);angular.forEach($scope.projects,function(value,idx){if(value.NO==data.PROJECT_NO);$scope.item.PROJECT=$scope.projects[idx];return})})["catch"](function(error){dialogs.error("\uc624\ub958",error+"",{size:"md"})})};$scope.getSession().then($scope.sessionCheck).then($scope.permissionCheck).then($scope.init).then($scope.getTask)["catch"]($scope.reportProblems)}])});