<!-- Contents Include -->
<div class="col-xs-12" ng-controller="content_edit">

    <!-- Task list -->
    <accordion close-others="oneAtATime">
        <accordion-group is-open="status.open" ng-model="task">

            <!-- Task Head -->
            <accordion-heading style="clear:both; background-color:#000; padding:0;">
                <div class="row" style="height:100%;">
                    <div class="col-md-12" style="position:relative; padding:5px; margin:0;  cursor:pointer;">
                        <a data-toggle="collapse" style="color:#333">
                            <div class="panel-title" style="height:100%; font-size:0.68em; line-height:18px;">
                                <div class="col-xs-3 col-sm-3 col-md-2 col-lg-2 task-col-series" style="height:100%; text-align:center; ">
                                    <span style="font-size:1.16em;">월간앙쥬</span><br />
                                    <span>[{{ task.PROJECT_NM }}]</span>
                                </div>
                                <div class="col-xs-8 col-sm-6 col-md-6 col-lg-5 task-col-title" style="height:100%; display:inline; word-break: break-all; word-wrap: break-word; padding:8px 0;font-size:1.4em;">
                                    {{ task.SUBJECT }}
                                </div>
                                <div class="col-lg-1 task-col-manager" style="height:100%; margin-top:8px; text-align:left;">
                                    {{ task.REG_NM }}
                                </div>
                                <div class="col-md-2 col-sm-3 col-lg-2 task-col-date" style="height:100%; text-align:center; vertical-align:middle;">
                                    <span style="color:#868686;">{{task.REG_DT}} 등록</span><br />
                                    <span style="color:#DE4612; font-weight:bold;">{{task.CLOSE_YMD}} 마감</span>
                                </div>
                                <div class="col-md-2 col-lg-2 task-col-step" style="height:100%;  word-break: break-all; word-wrap: break-word; padding:8px 0; text-align:center;">
                                    {{ task.PHASE == '0' ? '태스크등록' : task.PHASE == '10' ? '원고작성' : task.PHASE == '11' ? '원고승인대기' : task.PHASE == '12' ? '원고반려' : task.PHASE == '13' ? '원고승인완료' : task.PHASE == '20' ? '편집작성' : task.PHASE == '21' ? '편집승인대기' : task.PHASE == '22' ? '편집반려' : '편집승인완료' }}
                                </div>
                            </div>

                            <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-up': status.open, 'glyphicon-chevron-down': !status.open}" style="position:absolute; top: 15px; right:10px;"></i>
                        </a>
                    </div>
                </div>
            </accordion-heading>
            <!-- //Task Head -->

            <div class="col-md-12">

                <div class="row" class="form-horizontal" style="float:left; margin:0px auto; width:100%;">

                    <div class="col-xs-6 form-group form_basic">
                        <label class="form_label">담당자</label>
                        <div class="form_valueText">{{ task.REG_NM }}</div>
                    </div>
                    <div class="col-xs-6 form-group form_basic">
                        <label class="form_label">생성일</label>
                        <div class="form_valueText">{{ task.REG_DT }}</div>
                    </div>

                    <div class="col-xs-6 form-group form_basic">
                        <label class="form_label">카테고리</label>
                        <!--<pre>{{item.CATEGORY|json}}</pre>-->
                        <div class="balls_group">
                            <div class="bnt_ball_group" ng-repeat="category in task.CATEGORY">
                                <button type="button" class="btn btn-default cate_ball_normal">
                                    {{ category.CATEGORY_NM }}
                                </button>
                            </div>
                        </div>

                    </div>
                    <div class="col-xs-6 form-group form_basic">
                        <label class="form_label">태그</label>
                        <div class="balls_group">
                            <div class="btn-group bnt_ball_group" ng-repeat="tag in task.TAG | split:','">
                                <button type="button" class="btn btn-default tag_ball_normal">
                                    {{ task.TAG }}
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="col-xs-12 form-group form_basic">
                        <label class="form_label">설명</label>
                        <div class="form_valueText">{{ task.NOTE }}</div>
                    </div>

                    <div class="raw" style="float:left; width:100%; padding-top:10px; border-top:1px solid #DEDEDE;">
                        <div class="col-xs-6 form-group form_basic">
                            <button type="button" class="btn btn-info btn-xs start" ng-click="click_showGetHistory(task.NO);">
                                <i class="glyphicon glyphicon-list-alt"></i>
                                <span>History</span>
                            </button>
                        </div>
                    </div>

                </div>
            </div>

        </accordion-group>
    </accordion>

    <div ng-model="item" class="col-xs-12 row" style="margin:0px auto;">
        <form role="form" name="editForm" class="form-horizontal form_basic_100">
            <div class= "form-group form_basic_group">
                <H5 style="line-height:8px; margin:0;">
                    <span class="glyphicon glyphicon-pencil" style="color:#2486ED;"></span> <span class="label label-default">편집기</span>를 이용하여 작성합니다.
                </H5>
            </div>

            <div class= "form-group form_basic_group" style="float:left;">
                <div class="editor_cell" style="float:left; left:0;">
                    <textarea id="editor1" ng-model="item.BODY" ckeditor="editorOptions"></textarea>
                </div>
                <div class="editor_template_cell" style="float:left; width:782px; margin-top:0px; border:1px solid #DEDEDE; " ng-show="isTemplet">
                    <div style="width:100%; background:#464646; color:#fff; line-height: 42px; padding-left: 15px;">
                        Template

                        <div style="float:right; margin:8px 15px 0 15px;">
                            <select ng-model="search.YEAR" ng-options="" class="form-control" placeholder="템플릿 유형" style="margin:0; padding:2px; font-size:0.46em; height:25px;">
                                <option name="template_type" value="">전체 템플릿 보기</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-horizontal" style="float:left; padding:10px;">
                        <!-- span ng-click="click_selectTemplet('2E')">2단 사진 세로 구성</span -->

                        <div style="float:left; background-image:URL(); padding:4px; color:#646464; font-size: 0.68em; border:1px solid #EDEDED; width:98px; margin:5px; height:60px; cursor:pointer;" ng-click="click_selectTemplet('2E')">
                            2단 사진 세로
                        </div>

                        <!--<span ng-click="click_selectTemplet('2F')">2단 사진 세로 구성</span>-->
                    </div>
                </div>
            </div>
        </form>

        <div class= "form-group form_basic_group" style="float:left;">
            <H5 style="line-height:8px; margin:0;">
                <span class="glyphicon glyphicon-floppy-disk" style="color:#2486ED;"></span> 파일첨부
            </H5>
            <div ng-include=" '/partials/cms/file.html' " style="margin-top:20px; width:100%; float:left;"></div>
        </div>

        <div class="col-xs-12 row" style="float:left; margin:0px auto; margin-bottom:60px; ">
            <div class= "col-xs-6 form-group form_basic" style="text-align:left;">
                <button class="btn btn-success btn-xs fileinput-button" ng-click="click_showContentList();" >
                    <i class="glyphicon glyphicon-list"></i>
                    <span>목록</span>
                </button>
                <button type="button" class="btn btn-warning btn-xs start" ng-click="click_commitContent();" ng-hide="!isCommit">
                    <i class="glyphicon glyphicon-check"></i>
                    <span>등록&승인요청</span>
                </button>
                <button type="button" class="btn btn-danger btn-xs start" ng-click="click_returnContent();" ng-hide="!isApproval || task.PHASE == '12' || task.PHASE == '22'">
                    <i class="glyphicon glyphicon-ban-circle"></i>
                    <span>반려</span>
                </button>
                <button type="button" class="btn btn-success btn-xs start" ng-click="click_approveContent();" ng-hide="!isApproval || task.PHASE == '12' || task.PHASE == '22'">
                    <i class="glyphicon glyphicon-ok-circle"></i>
                    <span>승인</span>
                </button>
            </div>

            <!-- 하단 버튼 -->
            <div class= "col-xs-6 form-group form_basic" style="text-align:right;">

                <button type="button" class="btn btn-info btn-xs fileinput-button" ng-click="click_showPreview();" >
                    <i class="glyphicon glyphicon-zoom-in"></i>
                    <span>미리보기</span>
                </button>

                <button type="button" class="btn btn-primary btn-xs start" ng-click="click_saveContent();" ng-disabled="editForm.$invalid">
                    <i class="glyphicon glyphicon-plus"></i>
                    <span>저장</span>
                </button>
            </div>
        </div>

    </div>
</div>
<!-- ////Contents Include -->



<script type="text/ng-template" id="content_approval_modal.html">
    <div class="modal-header">
        <h3 class="modal-title">{{title}}</h3>
    </div>
    <div class="modal-body">
        <div ng-model="approval" lass="row" class="form-horizontal">
            <div class= "form-group">
                <label class= "col-md-2">콘텐츠순번</label>
                <div class="col-md-4">
                    <input ng-model="approval.CONTENT_NO" type= "text" class= "form-control" placeholder= "콘텐츠순번"/>
                </div>
            </div>
            <div class= "form-group">
                <label class= "col-md-2">메모</label>
                <div class="col-md-9">
                    <textarea ng-model="approval.NOTE" class= "form-control" placeholder= "간략한 설명.."/>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="click_ok()">확인</button>
        <button class="btn btn-warning" ng-click="click_cancel()">취소</button>
    </div>
</script>

<script type="text/ng-template" id="preview_modal.html">
    <div class="modal-header">
        <h3 class="modal-title">미리보기</h3>
    </div>
    <div class="modal-body">
        <div class="body_wrap">
            <div class="panel panel-master contentpannel" style="border:none; display:block;">
                <div class="contentpannel-body" >
                    <div class="col-md-12">
                        <div lass="row">
                            <div ng-bind-html="content"></div>
                            <!--<div ng-bind-html="renderHtml(item.BODY)"></div>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="click_ok()">확인</button>
    </div>
</script>

