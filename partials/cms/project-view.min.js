define(["controller/controllers"],function(c){c.controller("project-view",["$scope","$rootScope","$stateParams","$location","$q","dialogs","UPLOAD",function(b,d,e,c,h,g,f){b.item={};b.init=function(a){};b.click_showProjectEdit=function(a){"CMS_ADMIN"!=d.role&&"MANAGER"!=d.role&&d.uid!=a.REG_UID||"3"==a.PROJECT_ST?g.notify("\uc54c\ub9bc","\uc218\uc815 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.",{size:"md"}):c.url("/project/edit/"+a.NO)};b.click_showProjectList=function(){history.back()};b.getProject=
    function(){0!=e.id&&b.getItem("cms/project","item",e.id,{},!1).then(function(a){b.item=a;a=a.FILE;for(var c in a)b.file={name:a.FILE_NM,size:a[0].FILE_SIZE,url:f.BASE_URL+a[0].PATH+a[0].FILE_ID,thumbnailUrl:f.BASE_URL+a[0].PATH+"thumbnail/"+a[0].FILE_ID,mediumUrl:f.BASE_URL+a[0].PATH+"medium/"+a[0].FILE_ID,deleteUrl:"http://localhost/serverscript/upload/?file="+a[0].FILE_NM,deleteType:"DELETE"}})["catch"](function(a){console.log(a)})};b.getTaskList=function(){b.getList("cms/task","list",{},{PROJECT:{NO:e.id}},
    !1).then(function(a){b.TOTAL_COUNT=a[0].TOTAL_COUNT;b.list=a;console.log(a)})["catch"](function(a){b.TOTAL_COUNT=0;b.list=[]})};b.getSession().then(b.sessionCheck).then(b.permissionCheck).then(b.init).then(b.getProject).then(b.getTaskList)["catch"](b.reportProblems)}])});