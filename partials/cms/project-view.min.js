define(["controller/controllers"],function(f){f.controller("project-view",["$scope","$rootScope","$stateParams","$location","$q","dialogs","UPLOAD",function(b,c,d,g,f,h,e){b.item={};b.init=function(a){};b.click_showProjectEdit=function(a){"CMS_ADMIN"!=c.role&&"MANAGER"!=c.role&&c.uid!=a.REG_UID||"3"==a.PROJECT_ST?h.notify("\uc54c\ub9bc","\uc218\uc815 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.",{size:"md"}):g.url("/project/edit/"+a.NO)};b.click_showProjectList=function(){history.back()};b.click_showTaskView=
    function(a){g.url("/task/view/"+a)};b.click_showGetHistory=function(a){b.openHistoryModal({TASK_NO:a},"lg")};b.openHistoryModal=function(a,c){h.create("/partials/cms/popup/history.html",["$scope","$modalInstance","data",function(b,c,d){b.getList("cms/history","list",{},a,!0).then(function(a){b.list=a})["catch"](function(a){console.log(a)});b.list=d;b.click_ok=function(){c.close()}}],a,{size:c,keyboard:!0},b).result.then(function(){},function(){})};b.getProject=function(){0!=d.id&&b.getItem("cms/project",
    "item",d.id,{},!1).then(function(a){b.item=a;a=a.FILE;for(var c in a)b.file={name:a.FILE_NM,size:a[0].FILE_SIZE,url:e.BASE_URL+a[0].PATH+a[0].FILE_ID,thumbnailUrl:e.BASE_URL+a[0].PATH+"thumbnail/"+a[0].FILE_ID,mediumUrl:e.BASE_URL+a[0].PATH+"medium/"+a[0].FILE_ID,deleteUrl:"http://localhost/serverscript/upload/?file="+a[0].FILE_NM,deleteType:"DELETE"}})["catch"](function(a){console.log(a)})};b.getTaskList=function(){b.getList("cms/task","list",{},{PROJECT:{NO:d.id}},!1).then(function(a){b.TOTAL_COUNT=
    a[0].TOTAL_COUNT;b.list=a;console.log(a)})["catch"](function(a){b.TOTAL_COUNT=0;b.list=[]})};b.getSession().then(b.sessionCheck).then(b.permissionCheck).then(b.init).then(b.getProject).then(b.getTaskList)["catch"](b.reportProblems)}])});