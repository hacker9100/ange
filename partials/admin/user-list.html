<div ng-controller="user-list">
    <div class="panel panel-default" style="border-radius:0px;">
        <div class="panel-body" ng-model="search" class="row" style="border-radius: 0px; border-left:8px solid #DEDEDE; border-right:2px solid #DEDEDE;">

            <form role="form" name="list_form" class="form-horizontal">
                <div class="col-md-8">
                    <div ng-if="menu == 'save'" class= "form-group">
                        <label class= "col-md-2">목록</label>
                        <div class= "col-md-7">
                            <select ng-model="search.ADMIN_SAVE_LIST" ng-options="save.LIST_NM for save in saveList" class= "form-control"></select>
                        </div>
                    </div>
                    <div class= "form-group">
                        <label class= "col-md-2">검색</label>
                        <div class= "col-md-3">
                            <select ng-model="search.CONDITION" ng-options="condition.name for condition in condition" class= "form-control"></select>
                        </div>
                        <div class="col-md-6">
                            <input ng-model="search.KEYWORD" type= "text" class= "form-control" placeholder= "검색어" />
                        </div>
                    </div>
                    <div class= "form-group">
                        <label class= "col-md-2">유형</label>
                        <div class="col-md-9">
                            <div class="checkbox-inline" ng-repeat="item in type" >
                                <input checklist-model="search.TYPE" type= "checkbox" checklist-value="item.value" /> {{item.name}}
                            </div>
                        </div>
                    </div>
                    <div class= "form-group">
                        <label class= "col-md-2">상태</label>
                        <div class="col-md-9">
                            <div class="radio-inline" ng-repeat="item in status" >
                                <input ng-model="search.STATUS" type= "radio" ng-value="item.value" /> {{item.name}}
                            </div>
                        </div>
                    </div>
                    <div class= "form-group">
                        <label class= "col-md-2">활동</label>
                        <div class="col-md-9">
                            <div class="radio-inline" ng-repeat="item in act" >
                                <input ng-model="search.ACT" type= "radio" ng-value="item.value" /> {{item.name}}
                            </div>
                        </div>
                    </div>
                    <input ng-model="LIST_NM" type= "text" class= "form-control" placeholder= "리스트 이름" />
                </div>

                <div class="col-md-pull-2">
                    <div class= "navbar-header" >
                        <button class="btn btn-primary start" ng-click="click_searchUser();" ng-disabled="list_form.$invalid">
                            <i class="glyphicon glyphicon-search"></i>
                            <span>검색</span>
                        </button>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class= "form-group">
                        <label class= "col-md-2">기능</label>
                    </div>
                    <div class= "form-group">
                        <span>총</span>{{ TOTAL_CNT }} <span> 명중</span>{{ check_cnt }}</span>명이 선택되었습니다.</span>
                    </div>
                    <div class= "form-group">
                        <div class="col-md-9">
                            <div class="radio-inline" ng-repeat="item in range" >
                                <input ng-model="action.CHECKED" type="radio" ng-value="item.value" /> {{item.name}}
                            </div>
                        </div>
                    </div>
                    <div class= "form-group">
                        <div class= "col-md-4">
                            <select ng-model="action.FUNCTION" ng-options="function.name for function in function" class= "form-control"></select>
                        </div>
                        <span>처리합니다.</span>
                        <button class="btn btn-success fileinput-button" data-ng-click="click_function()">
                            <i class="glyphicon glyphicon-plus"></i>
                            <span>실행</span>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div>
        <div class="col-md-6">
            <button class="btn btn-success fileinput-button" data-ng-click="click_refreshList()">
                <i class="glyphicon glyphicon-plus"></i>
                <span>목록갱신</span>
            </button>
            <button ng-if="menu != 'save'" class="btn btn-success fileinput-button" data-ng-click="click_createNewUser()">
                <i class="glyphicon glyphicon-plus"></i>
                <span>신규회원등록</span>
            </button>
            <button ng-if="menu != 'save'" class="btn btn-success fileinput-button" data-ng-click="click_saveSearch()">
                <i class="glyphicon glyphicon-plus"></i>
                <span>자주쓰는 목록</span>
            </button>
        </div>
        <div class="col-md-pull-6">
            <div class= "col-md-2">
                <select ng-model="search.SORT" ng-options="sort.name for sort in sort" class= "form-control" ng-change="click_refreshList()"></select>
            </div>
            <div class= "col-md-2">
                <select ng-model="search.ORDER" ng-options="order.name for order in order" class= "form-control" ng-change="click_refreshList()"></select>
            </div>
        </div>
    </div>

    <div class= "form-group">

    </div>

    <!--
    <div>
        <div ng-activity-indicator="CircledWhite"></div>
        <div ng-show="!AILoading" class="name">CircledWhite</div>
    </div>
    -->

    <!--<div id="veil" ng-show="isLoading"></div>-->
    <div id="feedLoading" ng-show="isLoading">Loading...</div>

    <!-- Contents Include -->
    <!-- 목록 -->
    <table class="table table-striped table-condensed" >
        <thead>
        <tr>
            <th></th>
            <th>계정</th>
            <th>연락처</th>
            <th ng-if="search.ACT == 'A'">현황</th>
            <th ng-if="search.ACT == 'A'">Email/SNS</th>
            <th ng-if="search.ACT == 'C'">현황(글수)</th>
            <th ng-if="search.ACT == 'C'">공감/랭킹</th>
            <th ng-if="search.ACT == 'P'">현황(당첨/참여)</th>
            <th ng-if="search.ACT == 'P'">리뷰</th>
            <th ng-if="search.ACT == 'B'">현황(포스트)</th>
            <th ng-if="search.ACT == 'B'">방문(오늘/전체)</th>
            <th ng-if="search.ACT == 'B'">단계</th>
            <th>Point(Score)</th>
            <th>가입(최종접속)</th>
            <th>상태</th>
            <th>기능</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="item in list">
            <td><input ng-model="item.CHECKED" type= "checkbox" checklist-model="check_user" checklist-value="item.USER_ID"/></td>
            <td>{{ item.USER_NM + '(' + item.NICK_NM + ')' + item.USER_ID }}</td>
            <td>{{ item.PHONE_1 + item.PHONE_2 }}</td>
            <td ng-if="search.ACT == 'A'">{{ item.SEX_GB == 'M' ? '남자': '여자'}} ( {{ item.MARRIED_FL == 'Y' ? '기혼' : '미혼' }} ) <br> 자녀 ( {{ item.BABY_CNT }} )</td>
            <td ng-if="search.ACT == 'A'">{{ item.EMAIL }} <br> ( {{ item.SNS }} )</td>
            <td ng-if="search.ACT == 'C'">게시( {{ item.BOARD_CNT }} ) 댓글 ( {{ item.REPLY_CNT }} )</td>
            <td ng-if="search.ACT == 'C'">공감()</td>
            <td ng-if="search.ACT == 'P'">이벤트 ( {{ item.EXPERIENCE_WINNER_CNT }} / {{ item.EXPERIENCE_COMP_CNT }} ) 체험단 ( {{ item.EVENT_WINNER_CNT }} / {{ item.EVENT_COMP_CNT }} )</td>
            <td ng-if="search.ACT == 'P'">작성( {{ item.REVIEW_CNT }} ) 미작성( {{ item.REVIEW_CNT }} )</td>
            <td ng-if="search.ACT == 'B'">현황(포스트)</td>
            <td ng-if="search.ACT == 'B'">방문()</td>
            <td ng-if="search.ACT == 'B'">단계</td>
            <td>포인트</td>
            <td>{{ item.REG_DT }} <br> ( {{ item.FINAL_LOGIN_DT }} )</td>
            <td>
                <span ng-if="item.NEW_USER == 'Y'">New</span>
                {{ item.USER_GB == 'C' ? '앙쥬클럽' : item.USER_GB == 'S' ? '서포터즈' : '일반' }}
            </td>
            <!--<td>{{ item.USER_ST == 'F' ? '불량' : item.USER_ST == 'D' ? '휴면' : item.USER_ST == 'S' ? '탈퇴' : '정상' }}</td>-->
            <td>
                <a ng-click="test()">TEST</a>
                <a ng-click="click_showViewUser(item.USER_ID)">V</a>
                <a ng-if="menu != 'save'" ng-click="click_showEditUser(item)">수정</a>
                <a ng-if="menu != 'save'" ng-click="click_deleteUser(item)">B</a>

                <a ng-if="menu == 'save'" ng-click="click_removeUser(item)">-</a>
            </td>
        </tr>
        </tbody>
    </table>

    <!-- 페이징 -->
    <pagination boundary-links="true" total-items="TOTAL_CNT" ng-model="PAGE_NO" class="pagination-sm" ng-change="pageChanged()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
    <!-- ////Contents Include -->
</div>

<script type="text/ng-template" id="myangemessage_edit.html">
    <div class="modal-header">
        <h3 class="modal-title">쪽지 내용</h3>
    </div>
    <div class="modal-body">
        <div class="body_wrap">
            <div class="panel panel-master contentpannel" style="border:none; display:block;">
                <div class="contentpannel-body" >
                    <div class="people_view_wrap">

                        <div class="container-fluid peopleboard_view_topwrap">


                            <div class="row peopleboard_view_basicinfo">
                                <div class="col-xs-3" style="padding:0;">
                                    받는사람 ID
                                </div><!-- /.col-xs-2-->
                                <div class="col-xs-8" style="padding-left:5px;">
                                    <input type="text" ng-model="item.TO_ID" placeholder="받는사람 ID"/><!--{{item.FROM_ID}}-->
                                </div><!-- /.col-xs-4-->
                                <div class="col-xs-3" style="padding:0;">
                                    받는사람명
                                </div><!-- /.col-xs-2-->
                                <div class="col-xs-8" style="padding-left:5px;">
                                    <input type="text" ng-model="item.TO_NM" placeholder="받는사람 명"/><!--{{item.FROM_NM}}-->
                                </div><!-- /.col-xs-4-->
                            </div><!-- /.row -->
                        </div><!-- /.container -->


                        <div class="col-xs-12 people_editor">
                            <!--에디터 넣을자리 <br/>-->
                            <!--- (글꼴, 글색, 글크기(12,14,16,18pt)/  <br/>-->
                            <!--- 본문 정렬   <br/>-->
                            <!--- 굵게,기울기,취소,밑줄  <br/>-->
                            <!--- HTML-->
                            내용
                            <div style="border:1px solid #DEDEDE; width:100%; float:left;">
                                <div>
                                    <textarea id="editor1" ng-model="item.BODY" ckeditor="editorOptions" disabled="{{scope.isDisabled}}"></textarea>
                                </div>
                            </div>
                        </div><!-- /.people_editor -->
                    </div><!-- /.row -->
                </div><!-- /.container -->
            </div>
        </div>
    </div>
    </div>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="click_reg();">등록</button>
        <button class="btn btn-primary" ng-click="click_close();">닫기</button>
    </div>
</script>